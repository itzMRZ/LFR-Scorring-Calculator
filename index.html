<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LFR Score Calculator</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <div class="calculator-container">
        <div class="header">
            <div class="header-left">
                <h1>
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="title-icon">
                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                    </svg>
                    LFR Score Calculator
                </h1>
                <a href="https://github.com/itzMRZ" target="_blank" rel="noopener noreferrer" class="github-link">
                    <span>By</span>
                    <svg height="16" viewBox="0 0 16 16" width="16" fill="currentColor">
                        <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
                    </svg>
                    <span>itzMRZ</span>
                </a>
            </div>
            <div class="header-right">
                <button id="dark-mode-toggle" class="dark-mode-btn" title="Toggle Dark Mode">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <div class="settings-icon" id="settings-icon" title="Scoring Rules Settings">
                    <span class="custom-rules-badge hidden" id="custom-rules-badge">Custom</span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span class="settings-text">Settings</span>
                </div>
            </div>
        </div>

        <!-- Stopwatch Section -->
        <div class="stopwatch">
            <div class="stopwatch-display" id="stopwatch-display">00:00.00</div>
            <div class="stopwatch-controls">
                <button class="stopwatch-btn play-pause" id="play-pause-btn">
                    <svg class="play-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg class="pause-icon hidden" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                    </svg>
                    <span class="btn-text">Start</span>
                </button>
                <button class="stopwatch-btn reset" id="reset-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="M3 3v5h5"/>
                    </svg>
                    <span class="btn-text">Reset</span>
                </button>
            </div>
        </div>

        <!-- Checkboxes -->
        <div class="checkbox-group">
            <input type="checkbox" id="start-point">
            <label for="start-point">Leaving Start Point (S) — +20 points</label>
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="end-point">
            <label for="end-point">Stopping at End Point (E) — +20 points</label>
        </div>

        <!-- Input Grid -->
        <div class="input-grid">
            <div class="input-group">
                <label for="checkpoints">Checkpoints Crossed</label>
                <input type="number" id="checkpoints" value="0" min="0" placeholder="0">
            </div>

            <div class="input-group">
                <label for="restarts">Number of Restarts</label>
                <input type="number" id="restarts" value="0" min="0" placeholder="0">
            </div>

            <div class="input-group full-width">
                <label for="total-time">Total Time Allotted (minutes)</label>
                <input type="number" id="total-time" value="5" min="0" step="any" placeholder="5.0">
            </div>

            <div class="input-group full-width">
                <label for="elapsed-time-display">Elapsed Time</label>
                <div class="time-input-group">
                    <div class="input-wrapper">
                        <label for="elapsed-time-min" class="sub-label">Minutes</label>
                        <input type="number" id="elapsed-time-min" value="0" min="0" placeholder="0">
                    </div>
                    <div class="input-wrapper">
                        <label for="elapsed-time-sec" class="sub-label">Seconds</label>
                        <input type="number" id="elapsed-time-sec" value="0" min="0" placeholder="0">
                    </div>
                </div>
            </div>
        </div>

        <button id="calculate-btn">Calculate Score</button>

        <div id="result-container">
            <div id="total-score">Total Score: 0</div>
            <div id="score-breakdown"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Scoring Rules Settings</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>

            <!-- Preset Management Section -->
            <div class="preset-section">
                <h3>Presets</h3>
                <div class="preset-controls">
                    <select class="preset-select" id="preset-select">
                        <option value="">Select a preset...</option>
                    </select>
                    <button class="preset-btn" id="save-preset-btn">Save</button>
                    <button class="preset-btn danger" id="delete-preset-btn">Delete</button>
                </div>
            </div>

            <!-- Import/Export Section -->
            <div class="import-export-section">
                <h4>Import / Export Configuration</h4>
                <div class="import-export-controls">
                    <button id="export-config-btn">
                        <svg class="btn-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.5 1.5V10.5M8.5 10.5L11.5 7.5M8.5 10.5L5.5 7.5M2.5 11.5V13.5C2.5 14.0523 2.94772 14.5 3.5 14.5H13.5C14.0523 14.5 14.5 14.0523 14.5 13.5V11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="btn-text">Export</span>
                    </button>
                    <button id="import-config-btn">
                        <svg class="btn-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.5 10.5V1.5M8.5 1.5L11.5 4.5M8.5 1.5L5.5 4.5M2.5 11.5V13.5C2.5 14.0523 2.94772 14.5 3.5 14.5H13.5C14.0523 14.5 14.5 14.0523 14.5 13.5V11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="btn-text">Import</span>
                    </button>
                    <button id="copy-config-btn">
                        <svg class="btn-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.5 5.5V3.5C5.5 2.94772 5.94772 2.5 6.5 2.5H13.5C14.0523 2.5 14.5 2.94772 14.5 3.5V10.5C14.5 11.0523 14.0523 11.5 13.5 11.5H11.5M2.5 5.5H9.5C10.0523 5.5 10.5 5.94772 10.5 6.5V13.5C10.5 14.0523 10.0523 14.5 9.5 14.5H2.5C1.94772 14.5 1.5 14.0523 1.5 13.5V6.5C1.5 5.94772 1.94772 5.5 2.5 5.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="btn-text">Copy JSON</span>
                    </button>
                </div>
                <input type="file" id="import-file-input" accept=".json">
            </div>

            <!-- Scoring Rules -->
            <div class="settings-grid">
                <div class="settings-group">
                    <label for="rule-start-point">Start Point Score</label>
                    <input type="number" id="rule-start-point" value="20" step="1">
                    <div class="settings-description">Points for leaving the start point</div>
                    <div class="validation-error" id="error-start-point"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-end-point">End Point Score</label>
                    <input type="number" id="rule-end-point" value="20" step="1">
                    <div class="settings-description">Points for stopping at the end point</div>
                    <div class="validation-error" id="error-end-point"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-checkpoint">Checkpoint Score</label>
                    <input type="number" id="rule-checkpoint" value="150" step="1">
                    <div class="settings-description">Points per checkpoint crossed</div>
                    <div class="validation-error" id="error-checkpoint"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-restart">Restart Penalty</label>
                    <input type="number" id="rule-restart" value="-70" step="1">
                    <div class="settings-description">Points deducted per restart (use negative)</div>
                    <div class="validation-error" id="error-restart"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-bonus">Perfect Bonus</label>
                    <input type="number" id="rule-bonus" value="150" step="1">
                    <div class="settings-description">Bonus for completing with no restarts</div>
                    <div class="validation-error" id="error-bonus"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-time-multiplier">Time Multiplier</label>
                    <input type="number" id="rule-time-multiplier" value="1" step="0.1" min="0">
                    <div class="settings-description">Multiplier for remaining time in seconds</div>
                    <div class="validation-error" id="error-time-multiplier"></div>
                </div>

                <div class="settings-group">
                    <label for="rule-total-time">Total Time Allotted (minutes)</label>
                    <div class="time-preset-buttons">
                        <button type="button" class="time-preset-btn" data-time="3">3 min</button>
                        <button type="button" class="time-preset-btn" data-time="5">5 min</button>
                        <button type="button" class="time-preset-btn" data-time="8">8 min</button>
                        <button type="button" class="time-preset-btn" data-time="10">10 min</button>
                    </div>
                    <input type="number" id="rule-total-time" value="5" step="0.1" min="0">
                    <div class="settings-description">Maximum time allowed for the run</div>
                    <div class="validation-error" id="error-total-time"></div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn secondary" id="reset-defaults">Reset to Default</button>
                <button class="modal-btn primary" id="save-settings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Save Preset Modal -->
    <div class="save-preset-modal" id="save-preset-modal">
        <div class="save-preset-content">
            <h3>Save Preset</h3>
            <input type="text" id="preset-name-input" placeholder="Enter preset name..." maxlength="50">
            <div class="save-preset-actions">
                <button class="modal-btn secondary" id="cancel-save-preset">Cancel</button>
                <button class="modal-btn primary" id="confirm-save-preset">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- External JavaScript -->
    <script src="js/app.js"></script>
    <script defer src="/_vercel/insights/script.js"></script>

</body>
</html>
